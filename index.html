<!DOCTYPE html>
<html lang="en">
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Meetup Chat</title>

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: #FFD6E8;
  height: 100vh;
  display: flex;
  flex-direction: column;
  padding: 12px;
}

/* CHAT AREA */
#chat {
  flex: 1;
  overflow-y: auto;
  padding: 14px 10px;
  margin-bottom: 22vh;
}

/* MESSAGE BUBBLES */
.msg {
  max-width: 75%;
  padding: 10px 14px;
  border-radius: 16px;
  margin-bottom: 6px;
  font-size: 15px;
  animation: fadeIn .25s ease;
}

.bot {
  background: #fff;
}

.user {
  background: #DCF8C6;
  margin-left: auto;
}

/* REPLY BUTTONS */
.reply-wrap {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  margin-bottom: 14px;
}

.reply {
  background: linear-gradient(#FFB6D5, #FF8FC1);
  border: none;
  border-radius: 999px;
  padding: 8px 14px;
  font-size: 14px;
  cursor: pointer;
  box-shadow: 0 4px 0 #E07AA9;
}

.reply:active {
  transform: translateY(2px);
  box-shadow: 0 2px 0 #E07AA9;
}

/* INPUT */
.input-box {
  margin-top: 10px;
  animation: fadeIn .25s ease;
}

.input-box input {
  width: 100%;
  padding: 12px;
  border-radius: 14px;
  border: none;
  font-size: 15px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  outline: none;
}

/* TYPING */
.typing {
  background: #fff;
  padding: 10px 14px;
  border-radius: 16px;
  display: inline-flex;
  gap: 4px;
  margin-bottom: 10px;
}

.dot {
  width: 6px;
  height: 6px;
  background: #999;
  border-radius: 50%;
  animation: blink 1.4s infinite both;
}

/* BUNNY */
.bunny-panel {
  position: fixed;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 100%;
  display: flex;
  justify-content: center;
  pointer-events: none;
}

.bunny-panel img {
  height: 20vh;
  animation: bunnyBlink 6s infinite;
}

.bunny-wrap {
  animation: bunnyIdle 3s ease-in-out infinite;
}
.chat-header {
  position: sticky;
  top: 0;
  background: #FFD6E8;
  padding: 10px 12px;
  border-bottom: 1px solid rgba(0,0,0,0.05);
  z-index: 10;

  display: flex;
  align-items: center;
  justify-content: space-between;
}

.header-left {
  display: flex;
  align-items: center;
  gap: 10px;
}

.header-bunny {
  font-size: 26px;
}

.header-name {
  font-weight: 600;
  font-size: 15px;
}

.header-sub {
  font-size: 12px;
  color: #555;
}

.header-bunny {
  width: 34px;
  height: 34px;
  border-radius: 50%;
  overflow: hidden;
  background: rgba(255,255,255,0.6);
  display: flex;
  align-items: center;
  justify-content: center;
}

.refresh-btn {
  background: rgba(255,255,255,0.6);
  border: none;
  border-radius: 50%;
  width: 34px;
  height: 34px;
  font-size: 18px;
  cursor: pointer;

  display: flex;
  align-items: center;
  justify-content: center;
}

.refresh-btn:active {
  transform: scale(0.92);
}
.typing {
  display: flex;
  gap: 4px;
  margin: 8px 0;
}

.typing span {
  width: 6px;
  height: 6px;
  background: #999;
  border-radius: 50%;
  animation: blink 1.4s infinite both;
}

.typing span:nth-child(2) { animation-delay: .2s; }
.typing span:nth-child(3) { animation-delay: .4s; }

.hidden {
  display: none;
}

@keyframes blink {
  0% { opacity: .2; }
  20% { opacity: 1; }
  100% { opacity: .2; }
}

</style>

</head>

<body>

 <div class="chat-header">
  <div class="header-left">
    <div class="header-bunny">
      <lottie-player
        src="bunny.json"
        background="transparent"
        speed="0.6"
        style="width:34px;height:34px"
        autoplay
        loop>
      </lottie-player>
    </div>

    <div class="header-text">
      <div class="header-name">Bunny</div>
      <div class="header-sub">Meetup Chat Â· here with you</div>
    </div>
  </div>

  <button class="refresh-btn" onclick="location.reload()">ðŸ”„</button>
</div>

<div id="chat"></div>

<div class="bunny-panel">
  <div class="bunny-wrap">
    <lottie-player
      id="bunny"
      src="bunny.json"
      background="transparent"
      speed="1"
      loop
      autoplay
      style="height: 20vh;">
    </lottie-player>
  </div>
</div> 
<div id="typing" class="typing hidden">
  <span></span><span></span><span></span>
</div>

<script>

let userName = "";
let userPlace = "";
let skipped = {
  name: true,
  place: true
};

function showTyping() {
  document.getElementById("typing").classList.remove("hidden");
  scrollChat();
}

function hideTyping() {
  document.getElementById("typing").classList.add("hidden");
}

function botTyping(delay = 900) {
  return new Promise(resolve => {
    showTyping();
    setTimeout(() => {
      hideTyping();
      resolve();
    }, delay);
  });
}
function askInput(placeholder, callback) {
  const chat = document.getElementById("chat");

  const wrapper = document.createElement("div");
  wrapper.className = "input-wrap";

  const input = document.createElement("input");
  input.type = "text";
  input.placeholder = placeholder;

  const btn = document.createElement("button");
  btn.innerText = "Send";

  btn.onclick = () => {
    if (!input.value.trim()) return;
    chat.appendChild(userMsg(input.value));
    callback(input.value.trim());
    wrapper.remove();
    scrollChat();
  };

  wrapper.appendChild(input);
  wrapper.appendChild(btn);
  chat.appendChild(wrapper);
  scrollChat();
}

function showTyping() {
  document.getElementById("typing").classList.remove("hidden");
  scrollChat();
}

function hideTyping() {
  document.getElementById("typing").classList.add("hidden");
}

function botTyping(delay = 900) {
  return new Promise(resolve => {
    showTyping();
    setTimeout(() => {
      hideTyping();
      resolve();
    }, delay);
  });
}

const chat = document.getElementById("chat");

async function bot(text) {
  await botTyping();
  const chat = document.getElementById("chat");
  const msg = document.createElement("div");
  msg.className = "bot-msg";
  msg.innerText = text;
  chat.appendChild(msg);
  scrollChat();
}
  
function user(text) {
  const d = document.createElement("div");
  d.className = "msg user";
  d.textContent = text;
  chat.appendChild(d);
  chat.scrollTop = chat.scrollHeight;
}

function typing(next) {
  const t = document.createElement("div");
  t.className = "typing";
  t.innerHTML = `<div class="dot"></div><div class="dot"></div><div class="dot"></div>`;
  chat.appendChild(t);
  chat.scrollTop = chat.scrollHeight;

  setTimeout(() => {
    t.remove();
    next();
  }, 900);
}

function replies(list) {
  const wrap = document.createElement("div");
  wrap.className = "reply-wrap";

  list.forEach(item => {
    const b = document.createElement("button");
    b.className = "reply";
    b.textContent = item.text;
    b.onclick = () => {
      wrap.remove();
      user(item.text);
      typing(item.next);
    };
    wrap.appendChild(b);
  });

  chat.appendChild(wrap);
}

/* CONTACT INPUT */
function contactInput(type) {
  bot(`If you feel comfortable, we can continue this on ${type}.`);

  setTimeout(() => {
    const box = document.createElement("div");
    box.className = "input-box";
    box.innerHTML = `
      <input id="contactField" placeholder="Type hereâ€¦ (only if you want)">
      <div class="reply-wrap" style="margin-top:10px">
        <button class="reply" onclick="submitContact()">Continue</button>
        <button class="reply" style="background:#eee;color:#555;box-shadow:none"
          onclick="skipContact()">Skip</button>
      </div>
    `;
    chat.appendChild(box);
    chat.scrollTop = chat.scrollHeight;
  }, 600);
}

function submitContact() {
  const field = document.getElementById("contactField");
  const value = field.value.trim();
  if (!value) return;

  field.parentElement.remove();
  user(value);

  typing(() => {
   document.getElementById("bunny").setSpeed(1.5);
   setTimeout(() => {
  document.getElementById("bunny").setSpeed(1);
}, 1000);
    bot("Nice ðŸ™‚");
    bot("That was smooth.");
    bot("Hope you have a great day.");
  });
}

function skipContact() {
  document.querySelector(".input-box").remove();
  typing(() => {
    bot("Thatâ€™s completely okay.");
    bot("Thanks for giving this a moment.");
  });
}

/* SCRIPT START */
/* SCRIPT START */

// Helper to ask with buttons
async function startChat() {
  await bot("Hey âœ¨");
  await bot("Hi there ðŸ˜„");
  showButtons(["Hi", "Hello"], () => intro1());
}

async function intro1() {
  await bot("Okayâ€¦ this might feel a little random ðŸ˜‰");
  await bot("But donâ€™t worry â€” nothing awkward here.");
  showButtons(["Alright", "Go on"], () => moodCheck());
}

async function moodCheck() {
  await bot("How are you feeling right now?");
  showButtons(
    ["Pretty good", "Little nervous", "Just bored"],
    feelingResponse
  );
}

async function feelingResponse(choice) {
  if (choice === "Pretty good") {
    await bot("Nice ðŸ˜„");
    await bot("Good moods look good on people.");
  }
  if (choice === "Little nervous") {
    await bot("Thatâ€™s normal.");
    await bot("New conversations do that ðŸ˜‰ Relax â€” this oneâ€™s easy.");
  }
  if (choice === "Just bored") {
    await bot("Ahh okay ðŸ˜„");
    await bot("Letâ€™s see if we can change that.");
  }
  askName();
}

async function askName() {
  await bot("By the way, Iâ€™m Abhi.");
  await bot("What should I call you?");
  showButtons(
    ["Skip"],
    () => {
      bot("No worries ðŸ˜„");
      bot("We can keep it simple.");
      askTrustLine();
    },
    () => {
      askInput("Write your name here", val => {
        userName = val;
        skipped.name = false;
        bot("Ohâ€¦ thatâ€™s a nice name âœ¨");
        bot("It suits you.");
        askTrustLine();
      });
    }
  );
}

async function askTrustLine() {
  await bot("By the way â€”");
  await bot("this chat stays right here.");
  askPlace();
}

async function askPlace() {
  await bot("Are you from around here?");
  showButtons(["Yes", "No", "Skip"], async choice => {
    if (choice === "Yes") {
      await bot("Nice ðŸ˜„");
      askInput("Write your address / place here", val => {
        userPlace = val;
        skipped.place = false;
        bot("Got it ðŸ˜‰");
        funPersonality();
      });
    }
    if (choice === "No") {
      await bot("Oh okay ðŸ™‚");
      await bot("Actually, where are you from?");
      askInput("Write your place here", val => {
        userPlace = val;
        skipped.place = false;
        bot("Got it ðŸ˜‰");
        funPersonality();
      });
    }
    if (choice === "Skip") {
      bot("Thatâ€™s okay.");
      funPersonality();
    }
  });
}

async function funPersonality() {
  await bot("Tell me something ðŸ˜„");
  await bot("Are you more of a chill person or fun chaos type?");
  showButtons(
    ["Chill", "Fun chaos", "Somewhere in between"],
    async choice => {
      if (choice === "Chill") {
        await bot("I had a feeling ðŸ˜Œ");
        await bot("Calm vibes suit you.");
      }
      if (choice === "Fun chaos") {
        await bot("Haha okay ðŸ˜„");
        await bot("That explains the energy.");
      }
      if (choice === "Somewhere in between") {
        await bot("Best combo honestly âœ¨");
      }
      dayCheck();
    }
  );
}

async function dayCheck() {
  await bot("Howâ€™s your day been so far?");
  showButtons(["Good", "Normal", "Kinda bad"], async choice => {
    if (choice === "Good") {
      await bot("Nice ðŸ˜„");
      await bot("Good days deserve good conversations.");
    }
    if (choice === "Normal") {
      await bot("Normal days are underrated.");
      await bot("They just need one fun moment.");
    }
    if (choice === "Kinda bad") {
      await bot("Hmm okay.");
      await bot("Then maybe this chat can be a small upgrade ðŸ«¶");
    }
    askAgainIfSkipped();
  });
}

async function askAgainIfSkipped() {
  if (skipped.name || skipped.place) {
    await bot("If you feel comfortable now, you can share your name or location.");
    showButtons(["Share now", "Skip"], choice => {
      if (choice === "Share now") {
        if (skipped.name) {
          askInput("Write your name here", val => {
            userName = val;
            skipped.name = false;
            bot("Nice ðŸ˜„");
            flirtLine();
          });
        } else if (skipped.place) {
          askInput("Write your place here", val => {
            userPlace = val;
            skipped.place = false;
            bot("Got it ðŸ˜‰");
            flirtLine();
          });
        }
      } else {
        bot("All good âœ¨");
        bot("I respect that.");
        flirtLine();
      }
    });
  } else {
    flirtLine();
  }
}

async function flirtLine() {
  await bot("Can I say something honestly?");
  await bot("You seem confident â€” even when youâ€™re being quiet ðŸ˜‰");
  transitionOut();
}

async function transitionOut() {
  await bot("I like chatting with you ðŸ˜„");
  await bot("Should we continue this somewhere else?");
  showButtons(["Okay", "Maybe later"], choice => {
    if (choice === "Okay") chooseApp();
    else {
      bot("No stress ðŸ˜„");
      bot("I like honest people.");
    }
  });
}

async function chooseApp() {
  await bot("Which app do you prefer?");
  showButtons(["Instagram", "WhatsApp"], app => {
    if (app === "Instagram") {
      askInput("Write your Instagram ID here", () => {
        bot("Alright ðŸ˜„");
        endChat();
      });
    }
    if (app === "WhatsApp") {
      askInput("Write your WhatsApp number here", () => {
        bot("Alright ðŸ˜„");
        endChat();
      });
    }
  });
}

async function endChat() {
  await bot("This was fun.");
  await bot("Hope the rest of your day treats you nicely ðŸ’«");
}

</script>

</body>
</html>








