<!DOCTYPE html>
<html lang="en">
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Meetup Chat</title>

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: #FFD6E8;
  height: 100vh;
  display: flex;
  flex-direction: column;
  padding: 12px;
}

/* CHAT AREA */
#chat {
  flex: 1;
  overflow-y: auto;
  padding: 14px 10px;
  margin-bottom: 22vh;
}

/* MESSAGE BUBBLES */
.msg {
  max-width: 75%;
  padding: 10px 14px;
  border-radius: 16px;
  margin-bottom: 6px;
  font-size: 15px;
  animation: fadeIn .25s ease;
}

.bot {
  background: #fff;
}

.user {
  background: #DCF8C6;
  margin-left: auto;
}

/* REPLY BUTTONS */
.reply-wrap {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  margin-bottom: 14px;
}

.reply {
  background: linear-gradient(#FFB6D5, #FF8FC1);
  border: none;
  border-radius: 999px;
  padding: 8px 14px;
  font-size: 14px;
  cursor: pointer;
  box-shadow: 0 4px 0 #E07AA9;
}

.reply:active {
  transform: translateY(2px);
  box-shadow: 0 2px 0 #E07AA9;
}

/* INPUT */
.input-box {
  margin-top: 10px;
  animation: fadeIn .25s ease;
}

.input-box input {
  width: 100%;
  padding: 12px;
  border-radius: 14px;
  border: none;
  font-size: 15px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  outline: none;
}

/* TYPING */
.typing {
  background: #fff;
  padding: 10px 14px;
  border-radius: 16px;
  display: inline-flex;
  gap: 4px;
  margin-bottom: 10px;
}

.dot {
  width: 6px;
  height: 6px;
  background: #999;
  border-radius: 50%;
  animation: blink 1.4s infinite both;
}

/* BUNNY */
.bunny-panel {
  position: fixed;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 100%;
  display: flex;
  justify-content: center;
  pointer-events: none;
}

.bunny-panel img {
  height: 20vh;
  animation: bunnyBlink 6s infinite;
}

.bunny-wrap {
  animation: bunnyIdle 3s ease-in-out infinite;
}
.chat-header {
  position: sticky;
  top: 0;
  background: #FFD6E8;
  padding: 10px 12px;
  border-bottom: 1px solid rgba(0,0,0,0.05);
  z-index: 10;

  display: flex;
  align-items: center;
  justify-content: space-between;
}

.header-left {
  display: flex;
  align-items: center;
  gap: 10px;
}

.header-bunny {
  font-size: 26px;
}

.header-name {
  font-weight: 600;
  font-size: 15px;
}

.header-sub {
  font-size: 12px;
  color: #555;
}

.header-bunny {
  width: 34px;
  height: 34px;
  border-radius: 50%;
  overflow: hidden;
  background: rgba(255,255,255,0.6);
  display: flex;
  align-items: center;
  justify-content: center;
}

.refresh-btn {
  background: rgba(255,255,255,0.6);
  border: none;
  border-radius: 50%;
  width: 34px;
  height: 34px;
  font-size: 18px;
  cursor: pointer;

  display: flex;
  align-items: center;
  justify-content: center;
}

.refresh-btn:active {
  transform: scale(0.92);
}
.typing {
  display: flex;
  gap: 4px;
  margin: 8px 0;
}

.typing span {
  width: 6px;
  height: 6px;
  background: #999;
  border-radius: 50%;
  animation: blink 1.4s infinite both;
}

.typing span:nth-child(2) { animation-delay: .2s; }
.typing span:nth-child(3) { animation-delay: .4s; }

.hidden {
  display: none;
}

@keyframes blink {
  0% { opacity: .2; }
  20% { opacity: 1; }
  100% { opacity: .2; }
}

</style>

</head>

<body>

 <div class="chat-header">
  <div class="header-left">
    <div class="header-bunny">
      <lottie-player
        src="bunny.json"
        background="transparent"
        speed="0.6"
        style="width:34px;height:34px"
        autoplay
        loop>
      </lottie-player>
    </div>

    <div class="header-text">
      <div class="header-name">Bunny</div>
      <div class="header-sub">Meetup Chat Â· here with you</div>
    </div>
  </div>

  <button class="refresh-btn" onclick="location.reload()">ðŸ”„</button>
</div>

<div id="chat"></div>

<div class="bunny-panel">
  <div class="bunny-wrap">
    <lottie-player
      id="bunny"
      src="bunny.json"
      background="transparent"
      speed="1"
      loop
      autoplay
      style="height: 20vh;">
    </lottie-player>
  </div>
</div> 

<script>

let userName = "";
let userPlace = "";
let skipped = {
  name: true,
  place: true
};
function showButtons(options, callback) {
  const wrap = document.createElement("div");
  wrap.className = "reply-wrap";

  options.forEach(opt => {
    const btn = document.createElement("button");
    btn.className = "reply";
    btn.innerText = opt;

    btn.onclick = () => {
      wrap.remove();
      user(opt);
      callback(opt);
    };

    wrap.appendChild(btn);
  });

  chat.appendChild(wrap);
  scrollChat();
}

let typingEl = null;

let typingBubble = null;

function showTyping() {
  typingBubble = document.createElement("div");
  typingBubble.className = "msg bot typing";
  typingBubble.innerHTML = `
    <span></span><span></span><span></span>
  `;
  chat.appendChild(typingBubble);
  scrollChat();
}

function hideTyping() {
  if (typingBubble) {
    typingBubble.remove();
    typingBubble = null;
  }
}

function botTyping(delay = 1500) {
  return new Promise(resolve => {
    showTyping();
    setTimeout(() => {
      hideTyping();
      resolve();
    }, delay);
  });
}

function askInput(placeholder, callback) {
  const wrap = document.createElement("div");
  wrap.className = "msg user input-box";

  const input = document.createElement("input");
  input.placeholder = placeholder;

  const send = document.createElement("button");
  send.innerText = "Send";
  send.className = "reply";

  function submit() {
    if (!input.value.trim()) return;
    const val = input.value.trim();
    wrap.remove();
    user(val);
    callback(val);
  }

  input.onkeydown = e => {
    if (e.key === "Enter") submit();
  };

  send.onclick = submit;

  wrap.appendChild(input);
  wrap.appendChild(send);
  chat.appendChild(wrap);
  scrollChat();
}

const chat = document.getElementById("chat");

let lastBotTime = 0;

async function bot(text) {
  const now = Date.now();

  // Only show typing if last bot message was not just sent
  if (now - lastBotTime > 600) {
    await botTyping();
  }

  const msg = document.createElement("div");
  msg.className = "msg bot";
  msg.innerText = text;
  chat.appendChild(msg);
  scrollChat();

  lastBotTime = Date.now();
}

function user(text) {
  const d = document.createElement("div");
  d.className = "msg user";
  d.textContent = text;
  chat.appendChild(d);
  chat.scrollTop = chat.scrollHeight;
}

function waitForGesture(label, emoji, next) {
  const wrap = document.createElement("div");
  wrap.className = "reply-wrap";

  const btn = document.createElement("button");
  btn.className = "reply";
  btn.innerText = `${emoji} ${label}`;

  btn.onclick = () => {
    wrap.remove();
    user(label);
    next();
  };

  wrap.appendChild(btn);
  chat.appendChild(wrap);
  scrollChat();
}


function scrollChat() {
  chat.scrollTop = chat.scrollHeight;
}
function showGesture(label, emoji = "ðŸ™‚") {
  const wrap = document.createElement("div");
  wrap.className = "reply-wrap";

  const btn = document.createElement("button");
  btn.className = "reply";
  btn.innerText = `${emoji} ${label}`;

  btn.onclick = () => {
    wrap.remove();
    user(label);
  };

  wrap.appendChild(btn);
  chat.appendChild(wrap);
  scrollChat();
}

startChat();

/* SCRIPT START */

async function startChat() {
  await bot("Hey âœ¨");
  showGesture("hey", "ðŸ‘‹");

  await bot("Okayâ€¦ this might feel a little random ðŸ˜‰");
  showGesture("yeah");

  await bot("But donâ€™t worry â€” nothing awkward here.");
  showGesture("got it", "ðŸ‘");

  askMood();
}

/* MOOD â€” NO GESTURES HERE */
async function askMood() {
  await bot("How are you feeling right now?");
  showButtons(
    ["Pretty good ðŸ˜„", "Little nervous ðŸ™‚", "Just bored ðŸ˜"],
    moodResponse
  );
}

async function moodResponse(choice) {
  if (choice.includes("Pretty good")) {
    await bot("Nice ðŸ˜„");
    await bot("Good moods look good on people.");
  }

  if (choice.includes("Little nervous")) {
    await bot("Thatâ€™s normal.");
    await bot("New conversations do that ðŸ˜‰ Relax â€” this oneâ€™s easy.");
  }

  if (choice.includes("Just bored")) {
    await bot("Ahh okay ðŸ˜„");
    await bot("Letâ€™s see if we can change that.");
  }

  askName();
}

/* NAME */
async function askName() {
  await bot("By the way, Iâ€™m Abhi.");
  showGesture("nice to meet you", "ðŸ¤");

  await bot("What should I call you?");

  askInput("Write your name here", val => {
    userName = val;
    skipped.name = false;

    bot("Ohâ€¦ thatâ€™s a nice name âœ¨");
    showGesture("thanks", "ðŸ˜Š");

    bot("It suits you.");
    showGesture("haha", "ðŸ™‚");

    askPlace();
  });

  showButtons(["Skip"], () => {
    skipped.name = true;
    user("Skip");

    bot("No worries ðŸ˜„");
    showGesture("okay", "ðŸ‘");

    bot("We can keep it simple.");
    showGesture("cool", "ðŸ™‚");

    bot("By the way â€”");
    bot("this chat stays right here.");
    showGesture("ok", "ðŸ”’");

    askPlace();
  });
}

/* PLACE */
async function askPlace() {
  await bot("Are you from around here?");
  showButtons(["Yes", "No", "Skip"], handlePlace);
}

async function handlePlace(choice) {
  if (choice === "Yes") {
    askInput("Write your place here", val => {
      userPlace = val;
      skipped.place = false;

      bot("Nice ðŸ˜„");
      showGesture("nice", "ðŸ˜Š");

      bot("Thatâ€™s a very good place.");
      showGesture("thanks", "ðŸ™Œ");

      personality();
    });
  }

  if (choice === "No") {
    await bot("Oh okay ðŸ™‚");
    await bot("Actually, where are you from?");

    askInput("Write your place here", val => {
      userPlace = val;
      skipped.place = false;

      bot("Got it ðŸ˜‰");
      showGesture("okay", "ðŸ‘");

      personality();
    });
  }

  if (choice === "Skip") {
    bot("Thatâ€™s okay.");
    showGesture("cool", "ðŸ™‚");
    personality();
  }
}

/* PERSONALITY */
async function personality() {
  await bot("Tell me something ðŸ˜„");
  showGesture("sure", "ðŸ˜„");

  await bot("Are you more of a chill person or fun chaos type?");
  showButtons(
    ["Chill", "Fun chaos", "Somewhere in between"],
    dayCheck
  );
}

/* DAY */
async function dayCheck() {
  await bot("Howâ€™s your day been so far?");
  showButtons(["Good", "Normal", "Kinda bad"], dayReply);
}

async function dayReply(choice) {
  if (choice === "Good") {
    await bot("Nice ðŸ˜„");
    await bot("Good days deserve good conversations.");
    showGesture("true", "ðŸ‘‹");
  }

  if (choice === "Normal") {
    await bot("Normal days are underrated.");
  }

  if (choice === "Kinda bad") {
    await bot("Hmm okay.");
    await bot("Maybe this chat can be a small upgrade ðŸ«¶");
  }

  flirt();
}

/* FLIRT */
async function flirt() {
  await bot("Can I say something honestly?");
  showGesture("yes", "ðŸ™‚");

  await bot("You seem confident â€” even when youâ€™re being quiet ðŸ˜‰");
  showGesture("smiles", "ðŸ˜Œ");

  transition();
}

/* TRANSITION */
async function transition() {
  await bot("I like chatting with you ðŸ˜„");
  showGesture("same", "ðŸ˜Š");

  await bot("Should we continue this somewhere else?");
  showButtons(["Okay", "Maybe later"], chooseApp);
}

function chooseApp(choice) {
  if (choice === "Okay") {
    bot("Which app do you prefer?");
    showButtons(["Instagram", "WhatsApp"], askContact);
  } else {
    bot("No stress ðŸ˜„");
  }
}

function askContact(app) {
  const placeholder =
    app === "Instagram"
      ? "Write your Instagram ID here"
      : "Write your WhatsApp number here";

  askInput(placeholder, () => {
    bot("This was fun.");
    bot("Hope the rest of your day treats you nicely ðŸ’«");
  });
}

</script>

</body>
</html>













